<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>f6c0af4c47554cffb9ebe66022f5ade9</title>
  <style>
    html {
      line-height: 1.5;
      font-family: Georgia, serif;
      font-size: 20px;
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 1em;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, 'Lucida Console', Consolas, monospace;
      font-size: 85%;
      margin: 0;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<div class="cell code"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}"
id="eZt3JfhG3kov" data-outputId="5338aa26-e83a-4b60-b348-0198a3b27e02"
data-scrolled="true">
<div class="sourceCode" id="cb1"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>pip install langchain llama<span class="op">-</span>cpp<span class="op">-</span>python PyMuPDF faiss<span class="op">-</span>cpu sentence<span class="op">-</span>transformers</span></code></pre></div>
</div>
<div class="cell code" data-execution_count="2"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}"
id="Eup2zP1b416f" data-outputId="1f1179af-0a06-4593-cbcc-d66edff8b0a0">
<div class="sourceCode" id="cb2"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>pip install llama<span class="op">-</span>index</span></code></pre></div>
<div class="output stream stdout">
<pre><code>Collecting llama-index
  Downloading llama_index-0.10.67.post1-py3-none-any.whl.metadata (11 kB)
Collecting llama-index-agent-openai&lt;0.3.0,&gt;=0.1.4 (from llama-index)
  Downloading llama_index_agent_openai-0.2.9-py3-none-any.whl.metadata (729 bytes)
Collecting llama-index-cli&lt;0.2.0,&gt;=0.1.2 (from llama-index)
  Downloading llama_index_cli-0.1.13-py3-none-any.whl.metadata (1.5 kB)
Collecting llama-index-core&lt;0.11.0,&gt;=0.10.67 (from llama-index)
  Downloading llama_index_core-0.10.67-py3-none-any.whl.metadata (2.4 kB)
Collecting llama-index-embeddings-openai&lt;0.2.0,&gt;=0.1.5 (from llama-index)
  Downloading llama_index_embeddings_openai-0.1.11-py3-none-any.whl.metadata (655 bytes)
Collecting llama-index-indices-managed-llama-cloud&gt;=0.2.0 (from llama-index)
  Downloading llama_index_indices_managed_llama_cloud-0.2.7-py3-none-any.whl.metadata (3.8 kB)
Collecting llama-index-legacy&lt;0.10.0,&gt;=0.9.48 (from llama-index)
  Downloading llama_index_legacy-0.9.48.post3-py3-none-any.whl.metadata (8.5 kB)
Collecting llama-index-llms-openai&lt;0.2.0,&gt;=0.1.27 (from llama-index)
  Downloading llama_index_llms_openai-0.1.30-py3-none-any.whl.metadata (650 bytes)
Collecting llama-index-multi-modal-llms-openai&lt;0.2.0,&gt;=0.1.3 (from llama-index)
  Downloading llama_index_multi_modal_llms_openai-0.1.9-py3-none-any.whl.metadata (728 bytes)
Collecting llama-index-program-openai&lt;0.2.0,&gt;=0.1.3 (from llama-index)
  Downloading llama_index_program_openai-0.1.7-py3-none-any.whl.metadata (760 bytes)
Collecting llama-index-question-gen-openai&lt;0.2.0,&gt;=0.1.2 (from llama-index)
  Using cached llama_index_question_gen_openai-0.1.3-py3-none-any.whl.metadata (785 bytes)
Collecting llama-index-readers-file&lt;0.2.0,&gt;=0.1.4 (from llama-index)
  Downloading llama_index_readers_file-0.1.33-py3-none-any.whl.metadata (5.4 kB)
Collecting llama-index-readers-llama-parse&gt;=0.1.2 (from llama-index)
  Downloading llama_index_readers_llama_parse-0.1.6-py3-none-any.whl.metadata (3.6 kB)
Requirement already satisfied: openai&gt;=1.14.0 in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from llama-index-agent-openai&lt;0.3.0,&gt;=0.1.4-&gt;llama-index) (1.37.1)
Requirement already satisfied: PyYAML&gt;=6.0.1 in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from llama-index-core&lt;0.11.0,&gt;=0.10.67-&gt;llama-index) (6.0.1)
Requirement already satisfied: SQLAlchemy&gt;=1.4.49 in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from SQLAlchemy[asyncio]&gt;=1.4.49-&gt;llama-index-core&lt;0.11.0,&gt;=0.10.67-&gt;llama-index) (2.0.31)
Requirement already satisfied: aiohttp&lt;4.0.0,&gt;=3.8.6 in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from llama-index-core&lt;0.11.0,&gt;=0.10.67-&gt;llama-index) (3.10.0)
Requirement already satisfied: dataclasses-json in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from llama-index-core&lt;0.11.0,&gt;=0.10.67-&gt;llama-index) (0.6.7)
Collecting deprecated&gt;=1.2.9.3 (from llama-index-core&lt;0.11.0,&gt;=0.10.67-&gt;llama-index)
  Using cached Deprecated-1.2.14-py2.py3-none-any.whl.metadata (5.4 kB)
Collecting dirtyjson&lt;2.0.0,&gt;=1.0.8 (from llama-index-core&lt;0.11.0,&gt;=0.10.67-&gt;llama-index)
  Using cached dirtyjson-1.0.8-py3-none-any.whl.metadata (11 kB)
Requirement already satisfied: fsspec&gt;=2023.5.0 in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from llama-index-core&lt;0.11.0,&gt;=0.10.67-&gt;llama-index) (2024.3.1)
Requirement already satisfied: httpx in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from llama-index-core&lt;0.11.0,&gt;=0.10.67-&gt;llama-index) (0.27.0)
Requirement already satisfied: nest-asyncio&lt;2.0.0,&gt;=1.5.8 in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from llama-index-core&lt;0.11.0,&gt;=0.10.67-&gt;llama-index) (1.6.0)
Requirement already satisfied: networkx&gt;=3.0 in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from llama-index-core&lt;0.11.0,&gt;=0.10.67-&gt;llama-index) (3.3)
Collecting nltk!=3.9,&gt;=3.8.1 (from llama-index-core&lt;0.11.0,&gt;=0.10.67-&gt;llama-index)
  Downloading nltk-3.9.1-py3-none-any.whl.metadata (2.9 kB)
Requirement already satisfied: numpy&lt;2.0.0 in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from llama-index-core&lt;0.11.0,&gt;=0.10.67-&gt;llama-index) (1.26.4)
Requirement already satisfied: pandas in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from llama-index-core&lt;0.11.0,&gt;=0.10.67-&gt;llama-index) (2.2.2)
Requirement already satisfied: pillow&gt;=9.0.0 in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from llama-index-core&lt;0.11.0,&gt;=0.10.67-&gt;llama-index) (10.4.0)
Requirement already satisfied: requests&gt;=2.31.0 in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from llama-index-core&lt;0.11.0,&gt;=0.10.67-&gt;llama-index) (2.32.2)
Requirement already satisfied: tenacity!=8.4.0,&lt;9.0.0,&gt;=8.2.0 in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from llama-index-core&lt;0.11.0,&gt;=0.10.67-&gt;llama-index) (8.5.0)
Requirement already satisfied: tiktoken&gt;=0.3.3 in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from llama-index-core&lt;0.11.0,&gt;=0.10.67-&gt;llama-index) (0.7.0)
Requirement already satisfied: tqdm&lt;5.0.0,&gt;=4.66.1 in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from llama-index-core&lt;0.11.0,&gt;=0.10.67-&gt;llama-index) (4.66.4)
Requirement already satisfied: typing-extensions&gt;=4.5.0 in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from llama-index-core&lt;0.11.0,&gt;=0.10.67-&gt;llama-index) (4.11.0)
Requirement already satisfied: typing-inspect&gt;=0.8.0 in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from llama-index-core&lt;0.11.0,&gt;=0.10.67-&gt;llama-index) (0.9.0)
Collecting wrapt (from llama-index-core&lt;0.11.0,&gt;=0.10.67-&gt;llama-index)
  Downloading wrapt-1.16.0-cp311-cp311-macosx_11_0_arm64.whl.metadata (6.6 kB)
Collecting llama-cloud&gt;=0.0.11 (from llama-index-indices-managed-llama-cloud&gt;=0.2.0-&gt;llama-index)
  Downloading llama_cloud-0.0.13-py3-none-any.whl.metadata (751 bytes)
Collecting openai&gt;=1.14.0 (from llama-index-agent-openai&lt;0.3.0,&gt;=0.1.4-&gt;llama-index)
  Downloading openai-1.42.0-py3-none-any.whl.metadata (22 kB)
Requirement already satisfied: beautifulsoup4&lt;5.0.0,&gt;=4.12.3 in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from llama-index-readers-file&lt;0.2.0,&gt;=0.1.4-&gt;llama-index) (4.12.3)
Collecting pypdf&lt;5.0.0,&gt;=4.0.1 (from llama-index-readers-file&lt;0.2.0,&gt;=0.1.4-&gt;llama-index)
  Downloading pypdf-4.3.1-py3-none-any.whl.metadata (7.4 kB)
Collecting striprtf&lt;0.0.27,&gt;=0.0.26 (from llama-index-readers-file&lt;0.2.0,&gt;=0.1.4-&gt;llama-index)
  Using cached striprtf-0.0.26-py3-none-any.whl.metadata (2.1 kB)
Collecting llama-parse&gt;=0.4.0 (from llama-index-readers-llama-parse&gt;=0.1.2-&gt;llama-index)
  Downloading llama_parse-0.4.9-py3-none-any.whl.metadata (4.4 kB)
Requirement already satisfied: aiohappyeyeballs&gt;=2.3.0 in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from aiohttp&lt;4.0.0,&gt;=3.8.6-&gt;llama-index-core&lt;0.11.0,&gt;=0.10.67-&gt;llama-index) (2.3.4)
Requirement already satisfied: aiosignal&gt;=1.1.2 in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from aiohttp&lt;4.0.0,&gt;=3.8.6-&gt;llama-index-core&lt;0.11.0,&gt;=0.10.67-&gt;llama-index) (1.3.1)
Requirement already satisfied: attrs&gt;=17.3.0 in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from aiohttp&lt;4.0.0,&gt;=3.8.6-&gt;llama-index-core&lt;0.11.0,&gt;=0.10.67-&gt;llama-index) (23.1.0)
Requirement already satisfied: frozenlist&gt;=1.1.1 in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from aiohttp&lt;4.0.0,&gt;=3.8.6-&gt;llama-index-core&lt;0.11.0,&gt;=0.10.67-&gt;llama-index) (1.4.1)
Requirement already satisfied: multidict&lt;7.0,&gt;=4.5 in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from aiohttp&lt;4.0.0,&gt;=3.8.6-&gt;llama-index-core&lt;0.11.0,&gt;=0.10.67-&gt;llama-index) (6.0.5)
Requirement already satisfied: yarl&lt;2.0,&gt;=1.0 in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from aiohttp&lt;4.0.0,&gt;=3.8.6-&gt;llama-index-core&lt;0.11.0,&gt;=0.10.67-&gt;llama-index) (1.9.4)
Requirement already satisfied: soupsieve&gt;1.2 in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from beautifulsoup4&lt;5.0.0,&gt;=4.12.3-&gt;llama-index-readers-file&lt;0.2.0,&gt;=0.1.4-&gt;llama-index) (2.5)
Requirement already satisfied: pydantic&gt;=1.10 in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from llama-cloud&gt;=0.0.11-&gt;llama-index-indices-managed-llama-cloud&gt;=0.2.0-&gt;llama-index) (2.8.2)
Requirement already satisfied: anyio in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from httpx-&gt;llama-index-core&lt;0.11.0,&gt;=0.10.67-&gt;llama-index) (4.2.0)
Requirement already satisfied: certifi in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from httpx-&gt;llama-index-core&lt;0.11.0,&gt;=0.10.67-&gt;llama-index) (2024.7.4)
Requirement already satisfied: httpcore==1.* in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from httpx-&gt;llama-index-core&lt;0.11.0,&gt;=0.10.67-&gt;llama-index) (1.0.5)
Requirement already satisfied: idna in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from httpx-&gt;llama-index-core&lt;0.11.0,&gt;=0.10.67-&gt;llama-index) (3.7)
Requirement already satisfied: sniffio in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from httpx-&gt;llama-index-core&lt;0.11.0,&gt;=0.10.67-&gt;llama-index) (1.3.0)
Requirement already satisfied: h11&lt;0.15,&gt;=0.13 in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from httpcore==1.*-&gt;httpx-&gt;llama-index-core&lt;0.11.0,&gt;=0.10.67-&gt;llama-index) (0.14.0)
Requirement already satisfied: click in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from nltk!=3.9,&gt;=3.8.1-&gt;llama-index-core&lt;0.11.0,&gt;=0.10.67-&gt;llama-index) (8.1.7)
Requirement already satisfied: joblib in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from nltk!=3.9,&gt;=3.8.1-&gt;llama-index-core&lt;0.11.0,&gt;=0.10.67-&gt;llama-index) (1.4.2)
Requirement already satisfied: regex&gt;=2021.8.3 in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from nltk!=3.9,&gt;=3.8.1-&gt;llama-index-core&lt;0.11.0,&gt;=0.10.67-&gt;llama-index) (2023.10.3)
Requirement already satisfied: distro&lt;2,&gt;=1.7.0 in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from openai&gt;=1.14.0-&gt;llama-index-agent-openai&lt;0.3.0,&gt;=0.1.4-&gt;llama-index) (1.9.0)
Collecting jiter&lt;1,&gt;=0.4.0 (from openai&gt;=1.14.0-&gt;llama-index-agent-openai&lt;0.3.0,&gt;=0.1.4-&gt;llama-index)
  Downloading jiter-0.5.0-cp311-cp311-macosx_11_0_arm64.whl.metadata (3.6 kB)
Requirement already satisfied: charset-normalizer&lt;4,&gt;=2 in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from requests&gt;=2.31.0-&gt;llama-index-core&lt;0.11.0,&gt;=0.10.67-&gt;llama-index) (2.0.4)
Requirement already satisfied: urllib3&lt;3,&gt;=1.21.1 in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from requests&gt;=2.31.0-&gt;llama-index-core&lt;0.11.0,&gt;=0.10.67-&gt;llama-index) (2.2.2)
Collecting greenlet!=0.4.17 (from SQLAlchemy[asyncio]&gt;=1.4.49-&gt;llama-index-core&lt;0.11.0,&gt;=0.10.67-&gt;llama-index)
  Downloading greenlet-3.0.3-cp311-cp311-macosx_11_0_universal2.whl.metadata (3.8 kB)
Requirement already satisfied: mypy-extensions&gt;=0.3.0 in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from typing-inspect&gt;=0.8.0-&gt;llama-index-core&lt;0.11.0,&gt;=0.10.67-&gt;llama-index) (1.0.0)
Requirement already satisfied: marshmallow&lt;4.0.0,&gt;=3.18.0 in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from dataclasses-json-&gt;llama-index-core&lt;0.11.0,&gt;=0.10.67-&gt;llama-index) (3.21.3)
Requirement already satisfied: python-dateutil&gt;=2.8.2 in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from pandas-&gt;llama-index-core&lt;0.11.0,&gt;=0.10.67-&gt;llama-index) (2.9.0.post0)
Requirement already satisfied: pytz&gt;=2020.1 in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from pandas-&gt;llama-index-core&lt;0.11.0,&gt;=0.10.67-&gt;llama-index) (2024.1)
Requirement already satisfied: tzdata&gt;=2022.7 in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from pandas-&gt;llama-index-core&lt;0.11.0,&gt;=0.10.67-&gt;llama-index) (2024.1)
Requirement already satisfied: packaging&gt;=17.0 in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from marshmallow&lt;4.0.0,&gt;=3.18.0-&gt;dataclasses-json-&gt;llama-index-core&lt;0.11.0,&gt;=0.10.67-&gt;llama-index) (24.1)
Requirement already satisfied: annotated-types&gt;=0.4.0 in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from pydantic&gt;=1.10-&gt;llama-cloud&gt;=0.0.11-&gt;llama-index-indices-managed-llama-cloud&gt;=0.2.0-&gt;llama-index) (0.7.0)
Requirement already satisfied: pydantic-core==2.20.1 in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from pydantic&gt;=1.10-&gt;llama-cloud&gt;=0.0.11-&gt;llama-index-indices-managed-llama-cloud&gt;=0.2.0-&gt;llama-index) (2.20.1)
Requirement already satisfied: six&gt;=1.5 in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from python-dateutil&gt;=2.8.2-&gt;pandas-&gt;llama-index-core&lt;0.11.0,&gt;=0.10.67-&gt;llama-index) (1.16.0)
Downloading llama_index-0.10.67.post1-py3-none-any.whl (6.9 kB)
Downloading llama_index_agent_openai-0.2.9-py3-none-any.whl (13 kB)
Downloading llama_index_cli-0.1.13-py3-none-any.whl (27 kB)
Downloading llama_index_core-0.10.67-py3-none-any.whl (15.5 MB)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 15.5/15.5 MB 7.2 MB/s eta 0:00:0000:0100:01
a_index_embeddings_openai-0.1.11-py3-none-any.whl (6.3 kB)
Downloading llama_index_indices_managed_llama_cloud-0.2.7-py3-none-any.whl (9.5 kB)
Downloading llama_index_legacy-0.9.48.post3-py3-none-any.whl (1.2 MB)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 1.2/1.2 MB 7.0 MB/s eta 0:00:00a 0:00:01
a_index_llms_openai-0.1.30-py3-none-any.whl (11 kB)
Downloading llama_index_multi_modal_llms_openai-0.1.9-py3-none-any.whl (5.9 kB)
Downloading llama_index_program_openai-0.1.7-py3-none-any.whl (5.3 kB)
Using cached llama_index_question_gen_openai-0.1.3-py3-none-any.whl (2.9 kB)
Downloading llama_index_readers_file-0.1.33-py3-none-any.whl (38 kB)
Downloading llama_index_readers_llama_parse-0.1.6-py3-none-any.whl (2.5 kB)
Using cached Deprecated-1.2.14-py2.py3-none-any.whl (9.6 kB)
Using cached dirtyjson-1.0.8-py3-none-any.whl (25 kB)
Downloading llama_cloud-0.0.13-py3-none-any.whl (169 kB)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 169.4/169.4 kB 5.4 MB/s eta 0:00:00
a_parse-0.4.9-py3-none-any.whl (9.4 kB)
Downloading nltk-3.9.1-py3-none-any.whl (1.5 MB)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 1.5/1.5 MB 7.0 MB/s eta 0:00:00a 0:00:01
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 362.9/362.9 kB 6.3 MB/s eta 0:00:00a 0:00:01
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 295.8/295.8 kB 5.9 MB/s eta 0:00:00a 0:00:01
acosx_11_0_arm64.whl (38 kB)
Downloading greenlet-3.0.3-cp311-cp311-macosx_11_0_universal2.whl (271 kB)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 271.7/271.7 kB 6.6 MB/s eta 0:00:0000:01
acosx_11_0_arm64.whl (299 kB)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 299.3/299.3 kB 6.2 MB/s eta 0:00:00a 0:00:01
a-cloud, llama-index-legacy, llama-index-core, llama-parse, llama-index-readers-file, llama-index-llms-openai, llama-index-indices-managed-llama-cloud, llama-index-embeddings-openai, llama-index-readers-llama-parse, llama-index-multi-modal-llms-openai, llama-index-cli, llama-index-agent-openai, llama-index-program-openai, llama-index-question-gen-openai, llama-index
  Attempting uninstall: openai
    Found existing installation: openai 1.37.1
    Uninstalling openai-1.37.1:
      Successfully uninstalled openai-1.37.1
Successfully installed deprecated-1.2.14 dirtyjson-1.0.8 greenlet-3.0.3 jiter-0.5.0 llama-cloud-0.0.13 llama-index-0.10.67.post1 llama-index-agent-openai-0.2.9 llama-index-cli-0.1.13 llama-index-core-0.10.67 llama-index-embeddings-openai-0.1.11 llama-index-indices-managed-llama-cloud-0.2.7 llama-index-legacy-0.9.48.post3 llama-index-llms-openai-0.1.30 llama-index-multi-modal-llms-openai-0.1.9 llama-index-program-openai-0.1.7 llama-index-question-gen-openai-0.1.3 llama-index-readers-file-0.1.33 llama-index-readers-llama-parse-0.1.6 llama-parse-0.4.9 nltk-3.9.1 openai-1.42.0 pypdf-4.3.1 striprtf-0.0.26 wrapt-1.16.0
</code></pre>
</div>
</div>
<div class="cell code" data-execution_count="3"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}"
id="Biq1eLZp485Y" data-outputId="abcb17a2-dd37-4765-ad2c-0f2aad700889">
<div class="sourceCode" id="cb4"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>pip install <span class="op">-</span>U langchain<span class="op">-</span>community</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> fitz</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> langchain.vectorstores <span class="im">import</span> FAISS</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> langchain.embeddings <span class="im">import</span> HuggingFaceEmbeddings</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> transformers <span class="im">import</span> AutoModelForCausalLM, AutoTokenizer</span></code></pre></div>
<div class="output stream stdout">
<pre><code>Requirement already satisfied: langchain-community in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (0.2.10)
Collecting langchain-community
  Downloading langchain_community-0.2.12-py3-none-any.whl.metadata (2.7 kB)
Requirement already satisfied: PyYAML&gt;=5.3 in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from langchain-community) (6.0.1)
Requirement already satisfied: SQLAlchemy&lt;3,&gt;=1.4 in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from langchain-community) (2.0.31)
Requirement already satisfied: aiohttp&lt;4.0.0,&gt;=3.8.3 in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from langchain-community) (3.10.0)
Requirement already satisfied: dataclasses-json&lt;0.7,&gt;=0.5.7 in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from langchain-community) (0.6.7)
Collecting langchain&lt;0.3.0,&gt;=0.2.13 (from langchain-community)
  Downloading langchain-0.2.14-py3-none-any.whl.metadata (7.1 kB)
Collecting langchain-core&lt;0.3.0,&gt;=0.2.30 (from langchain-community)
  Downloading langchain_core-0.2.33-py3-none-any.whl.metadata (6.2 kB)
Requirement already satisfied: langsmith&lt;0.2.0,&gt;=0.1.0 in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from langchain-community) (0.1.95)
Requirement already satisfied: numpy&lt;2,&gt;=1 in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from langchain-community) (1.26.4)
Requirement already satisfied: requests&lt;3,&gt;=2 in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from langchain-community) (2.32.2)
Requirement already satisfied: tenacity!=8.4.0,&lt;9.0.0,&gt;=8.1.0 in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from langchain-community) (8.5.0)
Requirement already satisfied: aiohappyeyeballs&gt;=2.3.0 in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from aiohttp&lt;4.0.0,&gt;=3.8.3-&gt;langchain-community) (2.3.4)
Requirement already satisfied: aiosignal&gt;=1.1.2 in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from aiohttp&lt;4.0.0,&gt;=3.8.3-&gt;langchain-community) (1.3.1)
Requirement already satisfied: attrs&gt;=17.3.0 in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from aiohttp&lt;4.0.0,&gt;=3.8.3-&gt;langchain-community) (23.1.0)
Requirement already satisfied: frozenlist&gt;=1.1.1 in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from aiohttp&lt;4.0.0,&gt;=3.8.3-&gt;langchain-community) (1.4.1)
Requirement already satisfied: multidict&lt;7.0,&gt;=4.5 in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from aiohttp&lt;4.0.0,&gt;=3.8.3-&gt;langchain-community) (6.0.5)
Requirement already satisfied: yarl&lt;2.0,&gt;=1.0 in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from aiohttp&lt;4.0.0,&gt;=3.8.3-&gt;langchain-community) (1.9.4)
Requirement already satisfied: marshmallow&lt;4.0.0,&gt;=3.18.0 in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from dataclasses-json&lt;0.7,&gt;=0.5.7-&gt;langchain-community) (3.21.3)
Requirement already satisfied: typing-inspect&lt;1,&gt;=0.4.0 in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from dataclasses-json&lt;0.7,&gt;=0.5.7-&gt;langchain-community) (0.9.0)
Requirement already satisfied: langchain-text-splitters&lt;0.3.0,&gt;=0.2.0 in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from langchain&lt;0.3.0,&gt;=0.2.13-&gt;langchain-community) (0.2.2)
Requirement already satisfied: pydantic&lt;3,&gt;=1 in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from langchain&lt;0.3.0,&gt;=0.2.13-&gt;langchain-community) (2.8.2)
Requirement already satisfied: jsonpatch&lt;2.0,&gt;=1.33 in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from langchain-core&lt;0.3.0,&gt;=0.2.30-&gt;langchain-community) (1.33)
Requirement already satisfied: packaging&lt;25,&gt;=23.2 in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from langchain-core&lt;0.3.0,&gt;=0.2.30-&gt;langchain-community) (24.1)
Requirement already satisfied: typing-extensions&gt;=4.7 in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from langchain-core&lt;0.3.0,&gt;=0.2.30-&gt;langchain-community) (4.11.0)
Requirement already satisfied: orjson&lt;4.0.0,&gt;=3.9.14 in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from langsmith&lt;0.2.0,&gt;=0.1.0-&gt;langchain-community) (3.10.6)
Requirement already satisfied: charset-normalizer&lt;4,&gt;=2 in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from requests&lt;3,&gt;=2-&gt;langchain-community) (2.0.4)
Requirement already satisfied: idna&lt;4,&gt;=2.5 in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from requests&lt;3,&gt;=2-&gt;langchain-community) (3.7)
Requirement already satisfied: urllib3&lt;3,&gt;=1.21.1 in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from requests&lt;3,&gt;=2-&gt;langchain-community) (2.2.2)
Requirement already satisfied: certifi&gt;=2017.4.17 in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from requests&lt;3,&gt;=2-&gt;langchain-community) (2024.7.4)
Requirement already satisfied: jsonpointer&gt;=1.9 in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from jsonpatch&lt;2.0,&gt;=1.33-&gt;langchain-core&lt;0.3.0,&gt;=0.2.30-&gt;langchain-community) (3.0.0)
Requirement already satisfied: annotated-types&gt;=0.4.0 in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from pydantic&lt;3,&gt;=1-&gt;langchain&lt;0.3.0,&gt;=0.2.13-&gt;langchain-community) (0.7.0)
Requirement already satisfied: pydantic-core==2.20.1 in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from pydantic&lt;3,&gt;=1-&gt;langchain&lt;0.3.0,&gt;=0.2.13-&gt;langchain-community) (2.20.1)
Requirement already satisfied: mypy-extensions&gt;=0.3.0 in /opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages (from typing-inspect&lt;1,&gt;=0.4.0-&gt;dataclasses-json&lt;0.7,&gt;=0.5.7-&gt;langchain-community) (1.0.0)
Downloading langchain_community-0.2.12-py3-none-any.whl (2.3 MB)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 2.3/2.3 MB 6.3 MB/s eta 0:00:00a 0:00:01
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 997.8/997.8 kB 6.9 MB/s eta 0:00:00a 0:00:01
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 391.5/391.5 kB 6.6 MB/s eta 0:00:00a 0:00:01
munity
  Attempting uninstall: langchain-core
    Found existing installation: langchain-core 0.2.26
    Uninstalling langchain-core-0.2.26:
      Successfully uninstalled langchain-core-0.2.26
  Attempting uninstall: langchain
    Found existing installation: langchain 0.2.11
    Uninstalling langchain-0.2.11:
      Successfully uninstalled langchain-0.2.11
  Attempting uninstall: langchain-community
    Found existing installation: langchain-community 0.2.10
    Uninstalling langchain-community-0.2.10:
      Successfully uninstalled langchain-community-0.2.10
Successfully installed langchain-0.2.14 langchain-community-0.2.12 langchain-core-0.2.33
</code></pre>
</div>
</div>
<div class="cell code" data-execution_count="4" id="Q-pdha9a5xDR">
<div class="sourceCode" id="cb6"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> extract_from_pdf(pdf_file):</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  doc <span class="op">=</span> fitz.<span class="bu">open</span>(pdf_file)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  text <span class="op">=</span> <span class="st">&quot;&quot;</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> page_num <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(doc)):</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    page <span class="op">=</span> doc.load_page(page_num)</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    text <span class="op">+=</span> page.get_text()</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> text</span></code></pre></div>
</div>
<div class="cell code" data-execution_count="8" data-editable="true"
id="be1zcXED6Rqa" data-slideshow="{&quot;slide_type&quot;:&quot;&quot;}"
data-tags="[]">
<div class="sourceCode" id="cb7"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>pdf_file <span class="op">=</span> <span class="st">&quot;./datasets/citi.pdf&quot;</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>document_text <span class="op">=</span> extract_from_pdf(pdf_file)</span></code></pre></div>
</div>
<div class="cell code" data-execution_count="9"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}"
id="AmYmX8Mu6XZV" data-outputId="4de82600-ddea-4ef6-fab4-20db3f71a9e6">
<div class="sourceCode" id="cb8"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">len</span>(document_text))</span></code></pre></div>
<div class="output stream stdout">
<pre><code>1285502
</code></pre>
</div>
</div>
<div class="cell code" data-execution_count="10"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:460,&quot;referenced_widgets&quot;:[&quot;021d3792352f47ba8c85f43bb36ffa6e&quot;,&quot;937e019fa985497d821a0da28418dd0a&quot;,&quot;e01a7d6a8c93414aa11dba5b0fb537d9&quot;,&quot;874af36ee9ac4aecbbb08abf2723629d&quot;,&quot;26ab1e29cc9a46a48d6e378b1c5b2b38&quot;,&quot;364ba8ad07154bc8b16229d088504626&quot;,&quot;b20c519251fe497d98b2fed7316d0d73&quot;,&quot;54c892cd51394c8c860e9e0b95d6491d&quot;,&quot;052f217f40564fb1af23b1028c012641&quot;,&quot;c8d0365d338f4208826819361be15d58&quot;,&quot;40fd5f9b6c4c43b484432221771a3ea6&quot;,&quot;288d5313faab4e44844fb010cd66ec6b&quot;,&quot;a7eea737bb1345f58e432d64895c57f8&quot;,&quot;bb7ba73af1eb48bcab19eeceb8bcadef&quot;,&quot;e453bc541ee24346a3a93fe5beff9495&quot;,&quot;720bf0505df64ada9ddf10beccda0730&quot;,&quot;0e63629481674e1b8821d0b2cbfce2f0&quot;,&quot;7ba03dc20f9f4055bc3cb399a54b9cb1&quot;,&quot;8baf40834d1f4dcb80b838a4ade05590&quot;,&quot;e153d302ef8e4fc98e5037c53161c186&quot;,&quot;fe1bed9161b4416da1fb4074722db0ad&quot;,&quot;a39ef780729240088151ce55e1172b71&quot;,&quot;4b6d766655d9454789f7d5129573d540&quot;,&quot;241a65e3e62d472e9c3ca36bb9bdc58c&quot;,&quot;2737b5cb2d50403c85c1fc3eea25061f&quot;,&quot;becc72fec5044572913e237af7a7a667&quot;,&quot;4277845e86bd41af8d08d08bd2ae9734&quot;,&quot;0a797decc19343ed8250d7267263f238&quot;,&quot;48b49d90f54348e18381a054fa07734d&quot;,&quot;20d19bd887464a969769b8ef375cb46a&quot;,&quot;fbcb918d16f24d8fa89c82112774996d&quot;,&quot;03811a614f424d7d99cdb0446b3c7a8c&quot;,&quot;cb46069931564c01add9f70496384fbe&quot;,&quot;e5c3cb56cb6c4232b292855d25467f5d&quot;,&quot;05cab18740804dbd886110cf1eb87ad2&quot;,&quot;1a5be52e5fec4672b77c15b2f87ed1af&quot;,&quot;738b63f494ff4bd7bac1da9a55e51c3b&quot;,&quot;2283a7f9a9de455c997968a42bf36ea3&quot;,&quot;602057d49bf046b9a71ced407bd174cf&quot;,&quot;8bb1db053e064eb195bf89036f066fa4&quot;,&quot;6c4d8821adcb4d0dbd9c2ed0fd5b3982&quot;,&quot;025c7da7f62d4d869ac77adb3d90c41a&quot;,&quot;19c455afdb624e2aa3865156c87037b7&quot;,&quot;39acb1fcb85746b7846925b2b53d04b6&quot;,&quot;ad3e416117954ebaa1994ff2f817b09e&quot;,&quot;b52d2e7cdd044e298ab03af189d82361&quot;,&quot;14875129e1be47bf9a1758cc59ffd651&quot;,&quot;591c060c2a2648fb946167d22f240587&quot;,&quot;27a93b93759943bb87eff01184f97912&quot;,&quot;32a630735488404786fdc896548aee90&quot;,&quot;f18493b9ac56406e92874f70210b3e51&quot;,&quot;69dd8f9ac7a34fa0aa3cc0a030203daa&quot;,&quot;06cf1c7f7aac410c8852d8f8bc440c37&quot;,&quot;b131ecabf2c64c3cbbbc07700db0bb83&quot;,&quot;135713544162436a84625c14ae4b050f&quot;,&quot;653ba306c34c416d8b450f4b9558c7f8&quot;,&quot;ba12dde8ca57464e8fbc6702389bde37&quot;,&quot;cba53c26bce04e67905edaddb8057256&quot;,&quot;2e6206242cc348718922a2e916bfbe94&quot;,&quot;96616d53dd0f4150af39a46083bb8925&quot;,&quot;f4d655d631074459a283ce250b4cfbb0&quot;,&quot;964d248bbf3f410fa3f0f7da2bc1b385&quot;,&quot;8785440ae4294e8ba0a71c57902789ca&quot;,&quot;02367a685b5042f98cc310f1b939dda4&quot;,&quot;ff1b161880f244bc9c46fe69ce470771&quot;,&quot;767b47539866477580de05a5ee2e6d8c&quot;,&quot;79b85396cfba478eb354e3deb1e0e2ad&quot;,&quot;734c7935886b4147a3cc0453b97f0474&quot;,&quot;23fa96ee7e574b26baea92375aecdda6&quot;,&quot;3b7a2935a5164ffd97927992d9432e57&quot;,&quot;50ad4f7abb4843ea9d1966d63df8f335&quot;,&quot;c2ac2742c203448ba926712f1557d53b&quot;,&quot;3fb19584ecb6461c9b5ebb7e72880680&quot;,&quot;1ebd6c59200942129ecc16a39eb97ae3&quot;,&quot;cd126dd6f533444d8d7257bbdc180297&quot;,&quot;13039608ed4c4bbdbb26077d1f1e5037&quot;,&quot;9dab51fae1524fa2a8c5abd8cf3834fa&quot;,&quot;a9cdcc5efd624b73809518c61c8f0b21&quot;,&quot;a70e492ac71049deaa084b6ca60899fd&quot;,&quot;d314623989594ac5a15364782f641184&quot;,&quot;87a72fde382c42cd80028eb875394291&quot;,&quot;6f1c561c3d194e89b6bcf4aa03680781&quot;,&quot;bee455ceaf0148ba8a6d390c997b933d&quot;,&quot;cc82425314494f55bbdaf5434e2b6db6&quot;,&quot;0dc2e1e4259a4823ac253d3be9360a9a&quot;,&quot;67ea1fd532cb42449e20f02473f2260f&quot;,&quot;8e6ed20e5d7046ca9460ee83fd52ad00&quot;,&quot;cc2efd9376994df2a8342ba00a3e25a5&quot;,&quot;6d2e5aac57e74d868b8df37830456844&quot;,&quot;72f34d29360e434eb0d9bbe61a314758&quot;,&quot;c5114db59fcb4bef9fef56d848fe229f&quot;,&quot;e0d14a45aa634388a5c3de48557c1f71&quot;,&quot;a919b3c89ae240c7913b0a28520b9d85&quot;,&quot;cc532411044046b8a488da22cdbd1db9&quot;,&quot;89009b4782f946dbab64c3f91af9732d&quot;,&quot;f37e5d5be7034fca810f8da66713e36b&quot;,&quot;4f9a23714af84ca6b658b04f2c4f366b&quot;,&quot;4f0b23a8ffbf405a8c607138bd53d9b3&quot;,&quot;6735a3f7101b48e7a5017dc2f3095e66&quot;,&quot;472c017a792841d4ae2b875039d0a48a&quot;,&quot;e5971b95945b4b9a84c148c275a06422&quot;,&quot;c7d94c50ab0d43e58d472173d1e1ffdc&quot;,&quot;65bba958019a4c6393a0b2a93e76d538&quot;,&quot;dff727b83c904a83ade31720d6db0b56&quot;,&quot;b98d416804004b59bb3b264fa90ffb8f&quot;,&quot;aa8329c19c2d43af8cbbf05ec12bf5b2&quot;,&quot;2ac60730b71240fbab80a222f99063b4&quot;,&quot;be482e6a18d84c09ba12733693cf2e9a&quot;,&quot;f760ab55309e45b3acf72e8b80d28a87&quot;,&quot;90b50a9ed2ee4834baed77d4e0430f20&quot;,&quot;6f96620a0fbf4778829499f329710ff9&quot;,&quot;a3ff400e97d341a79d49887a9fa0b292&quot;,&quot;c60c80224dea4a7bb4994c78e182dd08&quot;,&quot;61f0df6e860e40cbb549c0cc434b4f48&quot;,&quot;40c8eff7a13e4cc29e90305de17e88ad&quot;,&quot;0106e939bc834ef4a66879bac0f65a46&quot;,&quot;ccf3421d7c704cd3b530c2d5c236e3d2&quot;,&quot;a4e54039aa484924a3ca1775188fea7c&quot;,&quot;c1b516c8a36e44e49a8636843b89f049&quot;,&quot;b48b4db03009462e907fec57086d8523&quot;,&quot;4431bdbc712d43fabb101f577aafaa2b&quot;]}"
id="RRWQ3yvV6aGf" data-outputId="161d10aa-db46-43a8-ffb0-dfc7579b745a">
<div class="sourceCode" id="cb10"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>embedding_model <span class="op">=</span> HuggingFaceEmbeddings(model_name<span class="op">=</span><span class="st">&quot;sentence-transformers/all-MiniLM-L6-v2&quot;</span>)</span></code></pre></div>
<div class="output stream stderr">
<pre><code>/opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:141: LangChainDeprecationWarning: The class `HuggingFaceEmbeddings` was deprecated in LangChain 0.2.2 and will be removed in 0.3.0. An updated version of the class exists in the langchain-huggingface package and should be used instead. To use it run `pip install -U langchain-huggingface` and import as `from langchain_huggingface import HuggingFaceEmbeddings`.
  warn_deprecated(
</code></pre>
</div>
<div class="output display_data">
<div class="sourceCode" id="cb12"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;model_id&quot;</span><span class="fu">:</span><span class="st">&quot;7cbf1456517a4e45a1dd2b38735aadbb&quot;</span><span class="fu">,</span><span class="dt">&quot;version_major&quot;</span><span class="fu">:</span><span class="dv">2</span><span class="fu">,</span><span class="dt">&quot;version_minor&quot;</span><span class="fu">:</span><span class="dv">0</span><span class="fu">}</span></span></code></pre></div>
</div>
<div class="output display_data">
<div class="sourceCode" id="cb13"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;model_id&quot;</span><span class="fu">:</span><span class="st">&quot;6c4d6ca1e1694d8dba5d0793d1dff277&quot;</span><span class="fu">,</span><span class="dt">&quot;version_major&quot;</span><span class="fu">:</span><span class="dv">2</span><span class="fu">,</span><span class="dt">&quot;version_minor&quot;</span><span class="fu">:</span><span class="dv">0</span><span class="fu">}</span></span></code></pre></div>
</div>
<div class="output display_data">
<div class="sourceCode" id="cb14"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;model_id&quot;</span><span class="fu">:</span><span class="st">&quot;03beea19c6c749b3a233ce4f81e4cbd9&quot;</span><span class="fu">,</span><span class="dt">&quot;version_major&quot;</span><span class="fu">:</span><span class="dv">2</span><span class="fu">,</span><span class="dt">&quot;version_minor&quot;</span><span class="fu">:</span><span class="dv">0</span><span class="fu">}</span></span></code></pre></div>
</div>
<div class="output display_data">
<div class="sourceCode" id="cb15"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;model_id&quot;</span><span class="fu">:</span><span class="st">&quot;d52dc886f38f4d338da790ea5479b0c2&quot;</span><span class="fu">,</span><span class="dt">&quot;version_major&quot;</span><span class="fu">:</span><span class="dv">2</span><span class="fu">,</span><span class="dt">&quot;version_minor&quot;</span><span class="fu">:</span><span class="dv">0</span><span class="fu">}</span></span></code></pre></div>
</div>
<div class="output stream stderr">
<pre><code>/opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages/huggingface_hub/file_download.py:1132: FutureWarning: `resume_download` is deprecated and will be removed in version 1.0.0. Downloads always resume when possible. If you want to force a new download, use `force_download=True`.
  warnings.warn(
</code></pre>
</div>
<div class="output display_data">
<div class="sourceCode" id="cb17"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;model_id&quot;</span><span class="fu">:</span><span class="st">&quot;3b1c89e828fb45749effccd690d6945e&quot;</span><span class="fu">,</span><span class="dt">&quot;version_major&quot;</span><span class="fu">:</span><span class="dv">2</span><span class="fu">,</span><span class="dt">&quot;version_minor&quot;</span><span class="fu">:</span><span class="dv">0</span><span class="fu">}</span></span></code></pre></div>
</div>
<div class="output display_data">
<div class="sourceCode" id="cb18"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;model_id&quot;</span><span class="fu">:</span><span class="st">&quot;bdf87f9d1d564148b50bb7a4590f66d2&quot;</span><span class="fu">,</span><span class="dt">&quot;version_major&quot;</span><span class="fu">:</span><span class="dv">2</span><span class="fu">,</span><span class="dt">&quot;version_minor&quot;</span><span class="fu">:</span><span class="dv">0</span><span class="fu">}</span></span></code></pre></div>
</div>
<div class="output display_data">
<div class="sourceCode" id="cb19"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;model_id&quot;</span><span class="fu">:</span><span class="st">&quot;cf3168b6fd1b48318e409643891b2ad1&quot;</span><span class="fu">,</span><span class="dt">&quot;version_major&quot;</span><span class="fu">:</span><span class="dv">2</span><span class="fu">,</span><span class="dt">&quot;version_minor&quot;</span><span class="fu">:</span><span class="dv">0</span><span class="fu">}</span></span></code></pre></div>
</div>
<div class="output display_data">
<div class="sourceCode" id="cb20"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;model_id&quot;</span><span class="fu">:</span><span class="st">&quot;d9ea0811e5614f0f9abef88de315828c&quot;</span><span class="fu">,</span><span class="dt">&quot;version_major&quot;</span><span class="fu">:</span><span class="dv">2</span><span class="fu">,</span><span class="dt">&quot;version_minor&quot;</span><span class="fu">:</span><span class="dv">0</span><span class="fu">}</span></span></code></pre></div>
</div>
<div class="output display_data">
<div class="sourceCode" id="cb21"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;model_id&quot;</span><span class="fu">:</span><span class="st">&quot;9db227a595fa4c6e8f962ce14f994952&quot;</span><span class="fu">,</span><span class="dt">&quot;version_major&quot;</span><span class="fu">:</span><span class="dv">2</span><span class="fu">,</span><span class="dt">&quot;version_minor&quot;</span><span class="fu">:</span><span class="dv">0</span><span class="fu">}</span></span></code></pre></div>
</div>
<div class="output display_data">
<div class="sourceCode" id="cb22"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;model_id&quot;</span><span class="fu">:</span><span class="st">&quot;83203867ac23498aa726499871d05da2&quot;</span><span class="fu">,</span><span class="dt">&quot;version_major&quot;</span><span class="fu">:</span><span class="dv">2</span><span class="fu">,</span><span class="dt">&quot;version_minor&quot;</span><span class="fu">:</span><span class="dv">0</span><span class="fu">}</span></span></code></pre></div>
</div>
<div class="output display_data">
<div class="sourceCode" id="cb23"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;model_id&quot;</span><span class="fu">:</span><span class="st">&quot;9090a9c8e4f04fe686ac815e4903683c&quot;</span><span class="fu">,</span><span class="dt">&quot;version_major&quot;</span><span class="fu">:</span><span class="dv">2</span><span class="fu">,</span><span class="dt">&quot;version_minor&quot;</span><span class="fu">:</span><span class="dv">0</span><span class="fu">}</span></span></code></pre></div>
</div>
</div>
<div class="cell code" data-execution_count="11" id="slUkm1Wp6kTx">
<div class="sourceCode" id="cb24"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> chunk_text(text, chunk_size<span class="op">=</span><span class="dv">1000</span>, overlap<span class="op">=</span><span class="dv">200</span>):</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>    chunks <span class="op">=</span> []</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>    start <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> start <span class="op">&lt;</span> <span class="bu">len</span>(text):</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>        end <span class="op">=</span> start <span class="op">+</span> chunk_size</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>        chunks.append(text[start:end])</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>        start <span class="op">+=</span> chunk_size <span class="op">-</span> overlap</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> chunks</span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>chunks <span class="op">=</span> chunk_text(document_text)</span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the FAISS vector store</span></span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>vector_store <span class="op">=</span> FAISS.from_texts(chunks, embedding_model)</span></code></pre></div>
</div>
<div class="cell code" data-execution_count="12"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:241,&quot;referenced_widgets&quot;:[&quot;f75ce41725a7493b88fca5d7fb3523d4&quot;,&quot;08f6bb8e68af4888887e6f02c8dffffd&quot;,&quot;673d7331d57d4d7f8f81af6fb4aebeac&quot;,&quot;9097bd4cf0af416883b5ab778d0dc1a8&quot;,&quot;511cb0b93849445085446cece9756027&quot;,&quot;f5de783860534d42a3164eee4eb5324e&quot;,&quot;6490017f40ea436fa2ec02128782d879&quot;,&quot;ef6c7756ec1c4db4996de87e717dff73&quot;,&quot;b4f097029dcf4deb95c4f345b68d4762&quot;,&quot;a1e354594a6a443e8f764099aa8f5116&quot;,&quot;e1723de9a3134a7b8bfd83c267773b91&quot;,&quot;d41c1a946f3845439a5b26210234b858&quot;,&quot;b74f0b12dc7e4a2aaa77ced80504fb3e&quot;,&quot;c9d4c83e03724e3cbe098281070f742e&quot;,&quot;a57fc5976d7f436c8069442bb3d770c1&quot;,&quot;9c1225a415774eb993ef5e6cc1913d9d&quot;,&quot;574d1059de8e43bc9dcb267ea3cdcf70&quot;,&quot;cf789d39d0534e698586ba817b969393&quot;,&quot;42eddc772c514d1997183b806bde2e82&quot;,&quot;ed16aecb01194f24a69720050919fcd8&quot;,&quot;5578371792904f3c92b647015b23accd&quot;,&quot;ba22a704c0b84421b7db202a5eb13b3b&quot;,&quot;364da599c2564a56af0a4239227b6e99&quot;,&quot;63a9f9578e0147aca2c23f9bd136eacb&quot;,&quot;e8bddbf70dcc4f2abdb52031018f85bc&quot;,&quot;23cd7c9853534b15b7ff8a6f6f3eb85e&quot;,&quot;2db8f0a2251640a1928119f695560ec3&quot;,&quot;b58804fc860b4d8dac138cf3cf8f86db&quot;,&quot;c08d6dd9f3b54b1987e8e10a57769de1&quot;,&quot;362e7a4644124854bb0c2390782366a4&quot;,&quot;5e2c385f35ef44bca819dd3c6af65999&quot;,&quot;10eae9972bd04811805b071fb6392417&quot;,&quot;4edafd944db748d1b3664756d969cb48&quot;,&quot;0ade90bb2eb241bba35d3337be28b4a8&quot;,&quot;59f2245bd17f424bb9660840478e5d75&quot;,&quot;73ecd873ad174bb7a1a993f7819b0a05&quot;,&quot;54bb2faee4e84d24b4450da876a28b8a&quot;,&quot;d6ab98decfd348a3bcba5aa064f97cc5&quot;,&quot;0590b3ff4bee4343bd19484d680d5f5f&quot;,&quot;198d1c0cc97d408eaa267ff1d94bdfe6&quot;,&quot;e154cfc7dc4e43f49c532447df9e18aa&quot;,&quot;311e9dcff9034a0a8eb79d0bc31b5f87&quot;,&quot;d394bf846cdd477285bcd1a6c4720399&quot;,&quot;db299f2c48c74573a3b4286167e895de&quot;,&quot;a9c7f044c2104dd9b50239cc39efe2af&quot;,&quot;6e323b3cb24a4342a420bfa7e4254af4&quot;,&quot;8c1cb4a6bb1145939b91ef8f227d82b6&quot;,&quot;d923838c000d459eb86f094b9ade3a0b&quot;,&quot;d2d681638c3f42a39d2f7c3ea2307002&quot;,&quot;4ce8e142ac26479e9e5b57d6eced5594&quot;,&quot;20753962609645d489fc2b8aa441eaa6&quot;,&quot;5c5894a2a32c4dd9aaf6fc998f59cbb0&quot;,&quot;68ac8b502f554010a35b126f30bb8ffa&quot;,&quot;1203b8466c2c4c2283e54c230ecda86b&quot;,&quot;434de791bbc24db2a8c54f4677b31483&quot;,&quot;a2c8c831eb85464cb3fc3204d960e4a2&quot;,&quot;caa64383a0b445dc9907c125c3e4f65a&quot;,&quot;60e9f26df766428abace8d4285da283a&quot;,&quot;a013f70846ee447eae2dba8285f4cc57&quot;,&quot;df4a0f5caab043898cbe64e61f5d6f37&quot;,&quot;a33f11f9598149b1814997ef125b4c1c&quot;,&quot;77052271357e47e39fc1c4cb6051cd86&quot;,&quot;51ad12122ba8444c91941e2f8dca103d&quot;,&quot;d10a53058e3940a9870dce952086a6e9&quot;,&quot;ef1b8d4d61c5487a926a31c94a1a8f45&quot;,&quot;ad5848734a954f86a6aed10596c9d9b1&quot;,&quot;e5b65d9882104c23b72750cba2810e81&quot;,&quot;3a3608e2edc0406bbc6b342b37e28983&quot;,&quot;e88c8ae5aabc4f5ab7e363b1d147d08a&quot;,&quot;a316eaa155e14b8e9f6bd96d2492934e&quot;,&quot;a2aff8a3c4ad490ebb246e82bfc4e915&quot;,&quot;1f548e5073af4a56ae68723da9b9f191&quot;,&quot;07cd5617bd434024b95fa679504eb497&quot;,&quot;f1fade6dcef54a169aee0aec1a891e84&quot;,&quot;1d075f9d174c45beb7b159d109a96195&quot;,&quot;6650b27e9e2b4eeeabce66947d4b2f22&quot;,&quot;3e4ff3e8d47e49f698c5cd572f83e787&quot;]}"
id="kI7zasbp6vmR" data-outputId="90290434-cbd9-4f07-d836-63127fface23">
<div class="sourceCode" id="cb25"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>tokenizer <span class="op">=</span> AutoTokenizer.from_pretrained(<span class="st">&quot;crumb/nano-mistral&quot;</span>)</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> AutoModelForCausalLM.from_pretrained(<span class="st">&quot;crumb/nano-mistral&quot;</span>)</span></code></pre></div>
<div class="output display_data">
<div class="sourceCode" id="cb26"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;model_id&quot;</span><span class="fu">:</span><span class="st">&quot;2e40798566b94606b7e8d904ac6fcb8d&quot;</span><span class="fu">,</span><span class="dt">&quot;version_major&quot;</span><span class="fu">:</span><span class="dv">2</span><span class="fu">,</span><span class="dt">&quot;version_minor&quot;</span><span class="fu">:</span><span class="dv">0</span><span class="fu">}</span></span></code></pre></div>
</div>
<div class="output display_data">
<div class="sourceCode" id="cb27"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;model_id&quot;</span><span class="fu">:</span><span class="st">&quot;faeca53e314d490bba298145828286ae&quot;</span><span class="fu">,</span><span class="dt">&quot;version_major&quot;</span><span class="fu">:</span><span class="dv">2</span><span class="fu">,</span><span class="dt">&quot;version_minor&quot;</span><span class="fu">:</span><span class="dv">0</span><span class="fu">}</span></span></code></pre></div>
</div>
<div class="output display_data">
<div class="sourceCode" id="cb28"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;model_id&quot;</span><span class="fu">:</span><span class="st">&quot;021fc5a8bf6544a5a7221ae3bf00953c&quot;</span><span class="fu">,</span><span class="dt">&quot;version_major&quot;</span><span class="fu">:</span><span class="dv">2</span><span class="fu">,</span><span class="dt">&quot;version_minor&quot;</span><span class="fu">:</span><span class="dv">0</span><span class="fu">}</span></span></code></pre></div>
</div>
<div class="output display_data">
<div class="sourceCode" id="cb29"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;model_id&quot;</span><span class="fu">:</span><span class="st">&quot;515cd4cdcca04b4e891682b126c44491&quot;</span><span class="fu">,</span><span class="dt">&quot;version_major&quot;</span><span class="fu">:</span><span class="dv">2</span><span class="fu">,</span><span class="dt">&quot;version_minor&quot;</span><span class="fu">:</span><span class="dv">0</span><span class="fu">}</span></span></code></pre></div>
</div>
<div class="output display_data">
<div class="sourceCode" id="cb30"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;model_id&quot;</span><span class="fu">:</span><span class="st">&quot;2fd0906953384ba0ba0237fe97ed9f40&quot;</span><span class="fu">,</span><span class="dt">&quot;version_major&quot;</span><span class="fu">:</span><span class="dv">2</span><span class="fu">,</span><span class="dt">&quot;version_minor&quot;</span><span class="fu">:</span><span class="dv">0</span><span class="fu">}</span></span></code></pre></div>
</div>
<div class="output display_data">
<div class="sourceCode" id="cb31"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;model_id&quot;</span><span class="fu">:</span><span class="st">&quot;620e08a3f90542668da6a3ea672af1aa&quot;</span><span class="fu">,</span><span class="dt">&quot;version_major&quot;</span><span class="fu">:</span><span class="dv">2</span><span class="fu">,</span><span class="dt">&quot;version_minor&quot;</span><span class="fu">:</span><span class="dv">0</span><span class="fu">}</span></span></code></pre></div>
</div>
<div class="output display_data">
<div class="sourceCode" id="cb32"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;model_id&quot;</span><span class="fu">:</span><span class="st">&quot;f285159df84647b597b91b76e4ecfc50&quot;</span><span class="fu">,</span><span class="dt">&quot;version_major&quot;</span><span class="fu">:</span><span class="dv">2</span><span class="fu">,</span><span class="dt">&quot;version_minor&quot;</span><span class="fu">:</span><span class="dv">0</span><span class="fu">}</span></span></code></pre></div>
</div>
</div>
<div class="cell code" data-execution_count="13" id="6sx8V5ad7Llw">
<div class="sourceCode" id="cb33"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>retreiver <span class="op">=</span> vector_store.as_retriever()</span></code></pre></div>
</div>
<div class="cell code" data-execution_count="14" id="KtceAyXd7TWU">
<div class="sourceCode" id="cb34"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> langchain.chains <span class="im">import</span> RetrievalQA</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> langchain.llms <span class="im">import</span> HuggingFacePipeline</span></code></pre></div>
</div>
<div class="cell code" data-execution_count="15" id="f0lsHVeo7nsg">
<div class="sourceCode" id="cb35"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> transformers</span></code></pre></div>
</div>
<div class="cell code" data-execution_count="16" id="mI62j_oA7XJX">
<div class="sourceCode" id="cb36"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> transformers <span class="im">import</span> pipeline</span></code></pre></div>
</div>
<div class="cell code" data-execution_count="17"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}"
id="Q-vwOnRU8dXx" data-outputId="6b9ffd7d-48ae-4a90-a277-7df5f56cd2e0">
<div class="sourceCode" id="cb37"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>hf_pipeline <span class="op">=</span> pipeline(<span class="st">&quot;summarization&quot;</span>, model<span class="op">=</span>model, tokenizer<span class="op">=</span>tokenizer, max_new_tokens<span class="op">=</span><span class="dv">200</span>)</span></code></pre></div>
<div class="output stream stderr">
<pre><code>The model &#39;MistralForCausalLM&#39; is not supported for summarization. Supported models are [&#39;BartForConditionalGeneration&#39;, &#39;BigBirdPegasusForConditionalGeneration&#39;, &#39;BlenderbotForConditionalGeneration&#39;, &#39;BlenderbotSmallForConditionalGeneration&#39;, &#39;EncoderDecoderModel&#39;, &#39;FSMTForConditionalGeneration&#39;, &#39;GPTSanJapaneseForConditionalGeneration&#39;, &#39;LEDForConditionalGeneration&#39;, &#39;LongT5ForConditionalGeneration&#39;, &#39;M2M100ForConditionalGeneration&#39;, &#39;MarianMTModel&#39;, &#39;MBartForConditionalGeneration&#39;, &#39;MT5ForConditionalGeneration&#39;, &#39;MvpForConditionalGeneration&#39;, &#39;NllbMoeForConditionalGeneration&#39;, &#39;PegasusForConditionalGeneration&#39;, &#39;PegasusXForConditionalGeneration&#39;, &#39;PLBartForConditionalGeneration&#39;, &#39;ProphetNetForConditionalGeneration&#39;, &#39;SeamlessM4TForTextToText&#39;, &#39;SeamlessM4Tv2ForTextToText&#39;, &#39;SwitchTransformersForConditionalGeneration&#39;, &#39;T5ForConditionalGeneration&#39;, &#39;UMT5ForConditionalGeneration&#39;, &#39;XLMProphetNetForConditionalGeneration&#39;].
</code></pre>
</div>
</div>
<div class="cell code" data-execution_count="18" id="3nN6rqdo-10-">
<div class="sourceCode" id="cb39"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>llm <span class="op">=</span> HuggingFacePipeline(pipeline<span class="op">=</span>hf_pipeline)</span></code></pre></div>
<div class="output stream stderr">
<pre><code>/opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:141: LangChainDeprecationWarning: The class `HuggingFacePipeline` was deprecated in LangChain 0.0.37 and will be removed in 0.3. An updated version of the class exists in the langchain-huggingface package and should be used instead. To use it run `pip install -U langchain-huggingface` and import as `from langchain_huggingface import HuggingFacePipeline`.
  warn_deprecated(
</code></pre>
</div>
</div>
<div class="cell code" data-execution_count="19" id="9jb655TZ_IGU">
<div class="sourceCode" id="cb41"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>rag_pipeline<span class="op">=</span>RetrievalQA.from_chain_type(llm<span class="op">=</span>llm, chain_type<span class="op">=</span><span class="st">&quot;stuff&quot;</span>, retriever<span class="op">=</span>retreiver)</span></code></pre></div>
</div>
<div class="cell code" data-execution_count="20" id="XM7nu07u_SlN">
<div class="sourceCode" id="cb42"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> query_rag(question):</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>  response<span class="op">=</span>rag_pipeline.run(question)</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> response</span></code></pre></div>
</div>
<div class="cell code" data-execution_count="21"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}"
data-editable="true" id="a80rssxg_Zv-"
data-outputId="4ee91e08-3009-48cc-9585-22f6cf781e5b"
data-slideshow="{&quot;slide_type&quot;:&quot;&quot;}" data-tags="[]">
<div class="sourceCode" id="cb43"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>question <span class="op">=</span> <span class="st">&quot;What is the main topic?&quot;</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>response <span class="op">=</span> query_rag(question)</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(response)</span></code></pre></div>
<div class="output stream stderr">
<pre><code>/opt/anaconda3/envs/rag-llm-langchain/lib/python3.11/site-packages/langchain_core/_api/deprecation.py:141: LangChainDeprecationWarning: The method `Chain.run` was deprecated in langchain 0.1.0 and will be removed in 1.0. Use invoke instead.
  warn_deprecated(
Setting `pad_token_id` to `eos_token_id`:2 for open-end generation.
</code></pre>
</div>
<div class="output stream stdout">
<pre><code>Use the following pieces of context to answer the question at the end. If you don&#39;t know the answer, just say that you don&#39;t know, don&#39;t try to make up an answer.

hem make the purchases — from everyday 
transactions to buying a home — that improve the quality of their lives. We advise 
people on how to invest for future needs, such as their children’s education and their 
own retirement, and help them buy securities such as stocks and bonds.
We work with companies to optimize their daily operations, whether they need working 
capital, to make payroll or export their goods overseas. By lending to companies large 
and small, we help them grow, creating jobs and real economic value at home and in 
communities around the world. We provide financing and support to governments at 
all levels, so they can build sustainable infrastructure, such as housing, transportation, 
schools and other vital public works.
These capabilities create an obligation to act responsibly, do everything possible to 
create the best outcomes and prudently manage risk. If we fall short, we will take 
decisive action and learn from our experience.
We strive to earn and maintai

ciples and risk appetite. 
Front line units are responsible and held accountable for 
managing the risks associated with their activities within the 
boundaries set by independent risk management. They are also 
responsible for designing and implementing effective internal 
controls and maintaining processes for managing their risk 
profile, including through risk mitigation, so that it remains 
consistent with Citi’s established risk appetite.
Front line unit activities are considered part of the first 
line of defense and are subject to the oversight and challenge 
of independent risk management. 
The first line of defense is composed of Citi’s operating 
segments (i.e., Services, Markets, Banking, U.S. Personal 
Banking, Wealth), as well as Client, Legacy Franchises and 
certain corporate functions (i.e., Chief Operating Office, 
Enterprise Services and Public Affairs, Finance, Operations 
and Technology). In addition, the first line of defense includes 
the front line unit activiti

y, which rolled out in the U.S. in 2022.
In 2023, one year after the Company became the first 
major U.S. bank to publicly embrace a flexible, hybrid work 
model, Citi fully implemented it across the organization. Most 
of Citi’s colleagues now work in hybrid roles, working 
remotely up to two days a week. How We Work provides the 
majority of colleagues with the ability to balance the demands 
of their home lives with the work commitments that are 
necessary for success. The program includes three role 
designations for colleagues globally: Resident, Hybrid or 
Remote. The implementation and continuation of this program 
differentiates Citi from other financial organizations with 
respect to flexible working arrangements. By embracing a 
flexible model of work, Citi has focused on keeping its 
approach consistent and aligned with its values and priorities. 
For additional information about Citi’s human capital 
management initiatives and goals, see Citi’s 2022 ESG Report 
available at

ing 
the same subject matter in multiple jurisdictions, which may 
result in overlapping, cumulative or inconsistent outcomes.
Citigroup seeks to resolve all litigation, regulatory, tax, 
and other matters in the manner management believes is in the 
best interests of Citigroup and its shareholders, and contests 
liability, allegations of wrongdoing, and, where applicable, the 
amount of damages or scope of any penalties or other relief 
sought as appropriate in each pending matter.
303
Inherent Uncertainty of the Matters Disclosed. Certain of 
the matters disclosed below involve claims for substantial or 
indeterminate damages. The claims asserted in these matters 
typically are broad, often spanning a multiyear period and 
sometimes a wide range of business activities, and the 
plaintiffs’ or claimants’ alleged damages frequently are not 
quantified or factually supported in the complaint or statement 
of claim. Other matters relate to regulatory investigations or 
proceedings, as to

Question: What is the main topic?
Helpful Answer:

The main topic of this question is the 
proceedings of the Citi Group, which is a 
non-profit corporation. The Citi Group is a 
non-profit corporation that is 
responsible for the management of the Citi Group.
The Citi Group is a non-profit corporation that 
is responsible for the management of the Citi Group.
The Citi Group is a non-profit corporation that 
is responsible for the management of the Citi Group.
The Citi Group is a non-profit corporation that 
is responsible for the management of the Citi Group.
The Citi Group is a non-profit corporation that 
is responsible for the management of the Citi Group.
The Citi Group is a non-profit corporation that 
is responsible for the management of the Citi Group.
The Citi Group is a non-profit corporation that 
is responsible for
</code></pre>
</div>
</div>
<div class="cell code" data-editable="true" id="Lv5sXl2O_gdP"
data-slideshow="{&quot;slide_type&quot;:&quot;&quot;}" data-tags="[]">
<div class="sourceCode" id="cb46"><pre
class="sourceCode python"><code class="sourceCode python"></code></pre></div>
</div>
</body>
</html>
